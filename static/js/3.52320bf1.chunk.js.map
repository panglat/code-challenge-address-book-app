{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","store/settings/selectors.js","components/base-components/Button/index.js","utils/constants.js","store/users/selectors.js","components/app-components/UserSearch/index.js","components/app-components/UserList/UserListItem/index.js","components/base-components/SimpleModal/index.js","components/app-components/UserDetailsModal/index.js","components/base-components/LoadingSpinner/index.js","components/app-components/UserList/index.js","components/app-components/Users/index.js"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_slicedToArray","arr","Array","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","unsupportedIterableToArray","TypeError","nationalitySearch","state","settings","Button","children","buttonType","rest","className","cn","defaultProps","USERS_BATCH_SIZE","USERS_MAX_CATALOGUE_LENGTH","nationalities","ch","es","fr","gb","userSearch","users","UserSearch","useState","search","setSearch","dispatch","useDispatch","storeUserSearch","useSelector","useEffect","htmlFor","id","type","onChange","event","setUserSearch","handleChange","UserListItem","user","email","login","name","picture","alt","first","last","src","thumbnail","username","SimpleModal","onCloseModal","onClick","UserDetailsModal","location","street","number","city","postcode","phone","cell","LoadingSpinner","UserList","userList","userListSelector","isFetchingUsers","loading","loadingUsersSelector","fetchFailed","error","loadUserFailedSelector","recordsToDisplay","userRecordsToDisplaySelector","userFilterLowerCase","userSearchSelector","toLowerCase","selectedNationalities","nationalitySearchSelector","selectedUser","setSelectedUser","userListRef","useRef","setUsersRecordsToDisplay","requestUsers","listLength","join","current","handleScroll","offsetHeight","scrollTop","scrollHeight","resetUsersError","addEventListener","removeEventListener","ref","filter","index","includes","map","salt","onItemClick","Users"],"mappings":"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","file":"static/js/3.52320bf1.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/**\r\n * @file Manages Settings Redux selectors.\r\n * @module redux-store/settings/Selectors\r\n */\r\n\r\n/**\r\n * @function\r\n * @description Get nationality search.\r\n */\r\nexport const nationalitySearch = (state) => state.settings.nationalitySearch;\r\n","/**\r\n * @file Render an html button element.\r\n * @module base-components/Button\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport './styles.scss';\r\n\r\nconst Button = ({ children, buttonType, ...rest }) => (\r\n  <button className={cn('button', { [`button--${buttonType}`]: buttonType })} {...rest}>\r\n    {children}\r\n  </button>\r\n);\r\n\r\nButton.propTypes = {\r\n  children: PropTypes.node,\r\n  buttonType: PropTypes.oneOf(['primary', 'secondary']),\r\n};\r\n\r\nButton.defaultProps = {\r\n  children: null,\r\n  buttonType: 'primary',\r\n};\r\n\r\nexport default Button;\r\n","export const USERS_BATCH_SIZE = 50;\r\nexport const USERS_MAX_CATALOGUE_LENGTH = 1000;\r\nexport const nationalities = {\r\n  ch: 'Swiss',\r\n  es: 'Spanish',\r\n  fr: 'French',\r\n  gb: 'British',\r\n};\r\n","/**\r\n * @file Manages Users Redux selectors.\r\n * @module redux-store/users/Selectors\r\n */\r\n\r\n/**\r\n * @function\r\n * @description Get users list\r\n */\r\nexport const userList = (state) => state.users.userList;\r\n/**\r\n * @function\r\n * @description Get users list\r\n */\r\nexport const loadingUsers = (state) => state.users.loading;\r\n/**\r\n * @function\r\n * @description Get the number of records to display in the users list.\r\n */\r\nexport const userRecordsToDisplay = (state) => state.users.recordsToDisplay;\r\n/**\r\n * @function\r\n * @description Get if the last user list request failed\r\n */\r\nexport const loadUserFailed = (state) => state.users.error;\r\n/**\r\n * @function\r\n * @description Get user search\r\n */\r\nexport const userSearch = (state) => state.users.userSearch;\r\n","/**\r\n * @file Render an input text to get the user search.\r\n * @module app-components/UserSearch\r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { userSearch } from '../../../store/users/selectors';\r\nimport { setUserSearch } from '../../../store/users/actions';\r\n\r\nimport './styles.scss';\r\n\r\nconst UserSearch = ({ className }) => {\r\n  const [search, setSearch] = useState('');\r\n  const dispatch = useDispatch();\r\n  const storeUserSearch = useSelector((state) => userSearch(state));\r\n\r\n  useEffect(() => {\r\n    setSearch(storeUserSearch);\r\n  }, [storeUserSearch]);\r\n\r\n  const handleChange = (event) => {\r\n    dispatch(setUserSearch(event.target.value));\r\n  };\r\n\r\n  return (\r\n    <form className={cn('user-search', className)}>\r\n      <label htmlFor=\"searchInput\">\r\n        Search:\r\n        <input\r\n          id=\"searchInput\"\r\n          type=\"text\"\r\n          value={search}\r\n          onChange={(event) => handleChange(event)}\r\n        />\r\n      </label>\r\n    </form>\r\n  );\r\n};\r\n\r\nUserSearch.propTypes = {\r\n  className: PropTypes.string,\r\n};\r\n\r\nUserSearch.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nexport default UserSearch;\r\n","/**\r\n * @file Render one user item in the list.\r\n * @module app-components/UserList/UserListItem\r\n */\r\n/* eslint-disable react/jsx-one-expression-per-line */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './styles.scss';\r\n\r\nconst UserListItem = ({ user, ...rest }) => {\r\n  const {\r\n    email, login, name, picture,\r\n  } = user;\r\n  return (\r\n    <div className=\"user-list-item\" {...rest}>\r\n      <div className=\"user-list-item__image\">\r\n        <img\r\n          alt={`${name.first} ${name.last}`}\r\n          src={picture.thumbnail}\r\n          className=\"user-list-item__image-thumbnail\"\r\n        />\r\n      </div>\r\n      <div className=\"user-list-item__user-information\">\r\n        <h2 className=\"user-list-item__full-name\">Name: {name.first} {name.last}</h2>\r\n        <p className=\"user-list-item__user-name\">Username: {login.username}</p>\r\n        <p className=\"user-list-item__email\">Email: {email}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nUserListItem.propTypes = {\r\n  user: PropTypes.shape({\r\n    email: PropTypes.string,\r\n    first: PropTypes.string,\r\n    login: PropTypes.shape({ username: PropTypes.string }),\r\n    last: PropTypes.string,\r\n    name: PropTypes.shape({ first: PropTypes.string, last: PropTypes.string }),\r\n    picture: PropTypes.shape({ thumbnail: PropTypes.string }),\r\n  }).isRequired,\r\n};\r\n\r\nexport default UserListItem;\r\n","/**\r\n * @file Render a simple modal element.\r\n * @module base-components/SimpleModal\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from '../Button';\r\n\r\nimport './styles.scss';\r\n\r\nconst SimpleModal = ({ children, onCloseModal }) => (\r\n  <div className=\"simple-modal\">\r\n    <section className=\"simple-modal__main\">\r\n      {children}\r\n      <div className=\"simple-modal__actions\">\r\n        <Button onClick={onCloseModal}>Close</Button>\r\n      </div>\r\n    </section>\r\n  </div>\r\n);\r\n\r\nSimpleModal.propTypes = {\r\n  children: PropTypes.node,\r\n  onCloseModal: PropTypes.func,\r\n};\r\n\r\nSimpleModal.defaultProps = {\r\n  children: null,\r\n  onCloseModal: () => {},\r\n};\r\n\r\n\r\nexport default SimpleModal;\r\n","/**\r\n * @file Render the user details modal.\r\n * @module app-components/UserDetailsModal\r\n */\r\n\r\n/* eslint-disable react/jsx-one-expression-per-line */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport SimpleModal from '../../base-components/SimpleModal';\r\n\r\nimport './styles.scss';\r\n\r\nconst UserDetailsModal = ({ user, ...rest }) => {\r\n  const { location, name } = user;\r\n  return (\r\n    <SimpleModal {...rest}>\r\n      <div className=\"user-details-modal\">\r\n        <h2>{`${name.first} ${name.last}`}</h2>\r\n        <p><b>Address:</b> {`${location.street.number}, ${location.street.name}`}</p>\r\n        <p><b>City:</b> {location.city}</p>\r\n        <p><b>State:</b> {location.state}</p>\r\n        <p><b>PostCode:</b> {location.postcode}</p>\r\n        <p><b>Phone:</b> {user.phone}</p>\r\n        <p><b>Cell:</b> {user.cell}</p>\r\n      </div>\r\n    </SimpleModal>\r\n  );\r\n};\r\n\r\nUserDetailsModal.propTypes = {\r\n  user: PropTypes.shape({\r\n    name: PropTypes.shape({ first: PropTypes.string, last: PropTypes.string }),\r\n    location: PropTypes.shape({\r\n      cell: PropTypes.string,\r\n      city: PropTypes.string,\r\n      phone: PropTypes.string,\r\n      postcode: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n      state: PropTypes.string,\r\n      street: PropTypes.shape({\r\n        number: PropTypes.number,\r\n        name: PropTypes.string,\r\n      }),\r\n    }),\r\n    phone: PropTypes.string,\r\n    cell: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default UserDetailsModal;\r\n","/**\r\n * @file Render a loading spinner element.\r\n * @module base-components/LoadingSpinner\r\n */\r\nimport React from 'react';\r\n\r\nimport './styles.scss';\r\n\r\nconst LoadingSpinner = () => (\r\n  <div className=\"loading-spinner\">\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n  </div>\r\n);\r\n\r\nexport default LoadingSpinner;\r\n","/**\r\n * @file Render the user list.\r\n * @module app-components/UserList\r\n */\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport {\r\n  requestUsers,\r\n  setUsersRecordsToDisplay,\r\n  resetUsersError,\r\n} from '../../../store/users/actions';\r\nimport {\r\n  userList as userListSelector,\r\n  loadingUsers as loadingUsersSelector,\r\n  userRecordsToDisplay as userRecordsToDisplaySelector,\r\n  loadUserFailed as loadUserFailedSelector,\r\n  userSearch as userSearchSelector,\r\n} from '../../../store/users/selectors';\r\nimport {\r\n  nationalitySearch as nationalitySearchSelector,\r\n} from '../../../store/settings/selectors';\r\nimport UserListItem from './UserListItem';\r\nimport UserDetailsModal from '../UserDetailsModal';\r\nimport {\r\n  USERS_BATCH_SIZE,\r\n  USERS_MAX_CATALOGUE_LENGTH,\r\n} from '../../../utils/constants';\r\nimport LoadingSpinner from '../../base-components/LoadingSpinner';\r\n\r\nimport './styles.scss';\r\n\r\n/**\r\n * @lends module:app-components/UserList\r\n */\r\nconst UserList = ({ className }) => {\r\n  const dispatch = useDispatch();\r\n  const users = useSelector((state) => userListSelector(state));\r\n  const isFetchingUsers = useSelector((state) => loadingUsersSelector(state));\r\n  const fetchFailed = useSelector((state) => loadUserFailedSelector(state));\r\n  const recordsToDisplay = useSelector((state) => userRecordsToDisplaySelector(state));\r\n  const userFilterLowerCase = useSelector((state) => userSearchSelector(state)).toLowerCase();\r\n  const selectedNationalities = useSelector((state) => nationalitySearchSelector(state));\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const userListRef = useRef(null);\r\n\r\n  /**\r\n   * HOW USERS ARE PRE-EMPTIVELY FETCHED\r\n   * The all users are stored *users* array. There is also a *recordsToDisplay*\r\n   * variable saving the number of users to be displayed in the UI user list.\r\n   * At the beginning the *recordsToDisplay* is set to USERS_BATCH_SIZE, making the useEffect\r\n   * to bring the first batch of users. Now *users*.length === *recordsToDisplay*,\r\n   * and a new pre-emptively fetch will be dispatched.\r\n   * Everytime the users length is lesser or equals to *recordsToDisplay*, a\r\n   * new pre-emptively user fetch will be dispatched.\r\n   * Once the new batch of user if fetched, they will be added at the end of the\r\n   * *users* list but they will not be displayed in the UI user list due to\r\n   * *recordsToDisplay* will not be updated with the new *users* list length.\r\n   * Once the user scroll to the button of the page, *recordsToDisplay* will be\r\n   * equal to *users* length, displaying in the full user list users in the UI,\r\n   * and a new pre-emptively user fetch will be dispatched.\r\n   */\r\n\r\n  /**\r\n   * Once the component is loaded, *recordsToDisplay* will be set with the first batch of users\r\n   */\r\n  useEffect(() => {\r\n    dispatch(setUsersRecordsToDisplay(USERS_BATCH_SIZE));\r\n  }, [dispatch]);\r\n\r\n  /**\r\n   * This effect fetches a batch of users.\r\n   */\r\n  useEffect(() => {\r\n    /**\r\n     * Everytime the users length is lesser or equals to *recordsToDisplay*, a\r\n     * new pre-emptively user fetch will be dispatched.\r\n     * The pre-emptively user fetch will not be dispatched if the is a previous\r\n     * fetch is being in process or the end of the catalog has been reached.\r\n     * Once the end of user catalog is reached, the last batch of user is\r\n     * displayed in the UI list by setting *recordsToDisplay* = *users*.length\r\n     */\r\n    if (!isFetchingUsers && users.length <= recordsToDisplay) {\r\n      if (recordsToDisplay < USERS_MAX_CATALOGUE_LENGTH && !fetchFailed) {\r\n        dispatch(\r\n          requestUsers({\r\n            listLength: USERS_BATCH_SIZE,\r\n            nationalities:\r\n              selectedNationalities && selectedNationalities.length > 0\r\n                ? selectedNationalities.join(',')\r\n                : null,\r\n          }),\r\n        );\r\n      } else {\r\n        dispatch(setUsersRecordsToDisplay(users.length));\r\n      }\r\n    }\r\n  }, [\r\n    dispatch,\r\n    isFetchingUsers,\r\n    users.length,\r\n    recordsToDisplay,\r\n    selectedNationalities,\r\n    fetchFailed,\r\n  ]);\r\n\r\n  const onItemClick = (user) => {\r\n    setSelectedUser(user);\r\n  };\r\n\r\n  /**\r\n   * this effect manages the infinite scroll\r\n   */\r\n  useEffect(() => {\r\n    if (!userListRef) return;\r\n    const { current } = userListRef;\r\n\r\n    /**\r\n     * Manage the user list scroll\r\n     */\r\n    const handleScroll = () => {\r\n      if (\r\n        current.offsetHeight + current.scrollTop !== current.scrollHeight && !isFetchingUsers\r\n      ) {\r\n        // The user has not reached the bottom of the list\r\n        return;\r\n      }\r\n      /**\r\n       * If the user reaches the bottom of the page, *recordsToDisplay* is set with *users*.length\r\n       * and any previous request error being is reset.\r\n       */\r\n      dispatch(setUsersRecordsToDisplay(users.length));\r\n      if (fetchFailed) {\r\n        dispatch(resetUsersError());\r\n      }\r\n    };\r\n\r\n    // Subscribe to the scroll event\r\n    current.addEventListener('scroll', handleScroll);\r\n\r\n    // Unsubscribe to the scroll event\r\n    // eslint-disable-next-line consistent-return\r\n    return () => current.removeEventListener('scroll', handleScroll);\r\n  }, [dispatch, fetchFailed, isFetchingUsers, userListRef, users.length]);\r\n\r\n  return (\r\n    <div className={cn('user-list', className)} ref={userListRef}>\r\n      <div className=\"user-list__container\">\r\n        {users\r\n          && users\r\n            .filter((user, index) => {\r\n              if (index >= recordsToDisplay) {\r\n                return false;\r\n              }\r\n              if (userFilterLowerCase) {\r\n                const { name } = user;\r\n                const fullNameLowercase = `${name.first} ${name.last}`.toLowerCase();\r\n                return fullNameLowercase.includes(userFilterLowerCase);\r\n              }\r\n              return true;\r\n            })\r\n            .map((user, index) => (\r\n              <UserListItem\r\n                key={`${user.login.salt}`}\r\n                index={index}\r\n                onClick={() => onItemClick(user)}\r\n                user={user}\r\n              />\r\n            ))}\r\n      </div>\r\n      {isFetchingUsers && (\r\n        <div className=\"user-list__loading-message\">\r\n          <LoadingSpinner />\r\n          <span>Fetching users</span>\r\n        </div>\r\n      )}\r\n      {!isFetchingUsers && fetchFailed && (\r\n        <div className=\"user-list__failed-message\">User fetch failed</div>\r\n      )}\r\n      {users.length >= USERS_MAX_CATALOGUE_LENGTH && (\r\n        <div className=\"user-list__end-of-user-catalog-message\">\r\n          End of users catalog\r\n        </div>\r\n      )}\r\n      {selectedUser && (\r\n        <UserDetailsModal\r\n          onCloseModal={() => setSelectedUser(null)}\r\n          user={selectedUser}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nUserList.propTypes = {\r\n  className: PropTypes.string,\r\n};\r\n\r\nUserList.defaultProps = {\r\n  className: '',\r\n};\r\n\r\n\r\nexport default UserList;\r\n","/**\r\n * @file Render the Users route.\r\n * @module app-components/Users\r\n */\r\nimport React from 'react';\r\n\r\nimport UserSearch from '../UserSearch';\r\nimport UserList from '../UserList';\r\n\r\nimport './styles.scss';\r\n\r\nconst Users = () => (\r\n  <div className=\"users\">\r\n    <UserSearch className=\"users__user-search\" />\r\n    <UserList className=\"users__user-list\" />\r\n  </div>\r\n);\r\n\r\nexport default Users;\r\n"],"sourceRoot":""}